---
layout:     post
title:      "简明易懂的HTTP状态码"
subtitle:   ""
date:       2011-12-11 23:17:11
author:     "Paian"
catalog: true
tags:
    - HTTP
---

## 简明易懂的HTTP状态码

下面所讲的HTTP版本是1.1。HTTP的状态码被分为五大类。

## 一、 100～199——信息性状态码

### 100 继续 （Continue）

**说明收到了请求的初始部分，请客户端继续。**

发送了这个状态码之后，服务器在收到请求之后必须进行响应。

如果客户端在向服务器发送一个实体，并且愿意在发送实体之前等待 100 Continue 响应，那么，客户端就要发送一个携带了值为 100 Continue 的 Expect 请求首部。如果客户端没有发送实体，就不应该发送 100 Continue Expect 首部，因为这样会使服务器误以为客户端要发送一个实体。从很多方面来看，100 Continue 都是一种优化。客户端应用程序只有在避免向服务器发送一个服务器无法处理或使用的大实体时，才应该使用 100 Continue。如果服务器收到了一条带有值为 100 Continue 的 Expect 首部的请求，它会用 100 Continue 响应或一条错误码来进行响应。

### 101 切换协议 （Switching Protocols）

**说明服务器正在根据客户端的指定，将协议切换到响应里Upgrade头域中所指明的协议。**

只有当协议切换时能受益，协议才应该切换。例如，当传输资源时，切换到一个新的HTTP版本比旧的版本要好，或者切换到一个实时的，同步的协议带来好处时，我们都应该考虑切换。

## 二、 200～299——成功状态码

这类状态码指明客户端的请球已经被服务器成功的接收了，理解了，并且接受了。

### 200 OK

**服务器已经成功处理了请求。实体的主体部分包含了所请求的资源。**

### 201 已创建（Created）

**请求成功并且服务器创建了新的资源。针对的是创建服务器对象的请求（比如，PUT）。**

响应的实体主体部分中应该包含各种引用了已创建的资源的URL，Location 首部包含的则是最具体的引用。服务器必须在发送这个状态码之前创建好对象。

### 202 已接受（Accepted）

**请求已被接受，但服务器还未对其执行任何动作。不能保证服务器会完成这个请求。**

这只是意味着接受请求时，它看起来是有效的。服务器应该在实体的主体部分包含对请求状态的描述，或许还应该有对请求完成时间的估计（或者包含一个指针，指向可以获取此信息的位置）。

### 203 非权威信息（Non-Authoritative Information）

**服务器已成功处理了请求，但返回的信息可能来自另一来源。**

实体首部包含的信息不是来自于源端服务器，而是来自资源的一份副本。如果中间节点上有一份资源副本，但无法或者没有对它所发送的与资源有关的元信息（首部）进行验证，就会出现这种情况。这种响应码并不是非用不可的；如果实体首部来自源端服务器，响应为200状态的应用程序就可以将其作为一种可选项使用。

### 204 无内容 （No Content）

**服务器成功处理了请求，但没有返回数据内容。浏览器不用刷新页面，也不用导向新的页面。**

例如，页面上有个form，提交的url为actions.htm，提交form，正常情况下，页面会跳转到action.htm，但是如果action.htm的相应的状态码是204，此时页面就不会发生转跳，还是停留在当前页面。另外对于a标签，如果链接的页面响应码为204，页面也不会发生跳转。

所以对于一些提交到服务器处理的数据，只需要返回是否成功的情况下，可以考虑使用状态码204来作为返回信息，从而省掉多余的数据传输。

响应报文中包含若干首部和一个状态行，但没有实体的主体部分。主要用于在浏览器不转为显示新文档
的情况下，对其进行更新（比如刷新一个表单页面）。

### 205 重置内容（Reset Content）

**负责告知浏览器清空当前页面中的所有HTML表单元素中用户输入的信息。**

此响应不能包含一个实体。

### 206 部分内容（Partial Content）

**服务器成功处理了一个部分或 Range（范围）请求。**

稍后我们会看到，客户端可以通过一些特殊的首部来获取部分或某个范围内的文档——这个状态码就说明范围请求成功了。

206响应中必须包含 Content-Range 、 Date 以及 ETag 或 Content-Location 首部。

## 三、300～399——重定向状态码

这类状态码指明用户代理需要更进一步的动作去完成请求。进一步的动作可能被浏览器自动执行而不需要用户的交互，并且进一步动作请求的方法必须为GET或HEAD。

重定向状态码要么告知客户端使用替代位置来访问他们所感兴趣的资源，要么就提供一个替代的响应而不是资源的内容。如果资源已被移动，可发送一个重定向状态码和一个可选的 Location 首部来告知客户端资源已被移走，以及现在可以在哪里找到它（见下图）。这样，浏览器就可以在不打扰使用者的情况下，透明地转入新的位置了。

![](/img/in-post/http-status-1.png)

可以通过某些重定向状态码对资源的应用程序本地副本与源端服务器上的资源进行验证。比如，HTTP 应用程序可以查看其资源的本地副本是否仍然是最新的，或者在源端服务器上资源是否被修改过。下图显示了一个这样的例子。客户端发送了一个特殊的 If-Modified-Since 首部，说明只读取 1997 年 10 月之后修改过的文档。这个日期之后，此文档并未被修改过，因此，服务器回送了一个 304 状态码，而不是文档的内容。

![](/img/in-post/http-status-2.png)

总之，在对那些包含了重定向状态码的非 HEAD 请求进行响应时，最好要包含一个实体，并在实体中包含描述信息和指向（多个）重定向 URL的链接。
### 300 多个选择（Multiple Choices）

客户端请求一个实际指向多个资源的URL时会返回这个状态码，比如服务器上有某个HTML文档的英语和法语版本。返回这个状态码时会带有一个选项列表；这样用户就可以选择他希望使用的那一项了。服务器可以在Location 首部包含首选URL。

### 301 永久移动（Moved Permanently）

**请求的网页已永久移动到新位置。服务器返回此响应（对 GET 或 HEAD 请求的响应）时，会自动将请求者转到新位置。**

在请求的URL已被永久移除时使用。响应的 Location 首部中应该包含资源现在所处的URL。

### 302 临时移动(Found)

与301状态码类似；但是，客户端应该使用 Location 首部给出的URL来临时定位资源。将来的请求仍应
使用老的URL。

### 303 查看其他位置(See Other)

告知客户端应该用另一个URL来获取资源。新的URL位于响应报文的 Location 首部。**其主要目的是允许POST请求的响应将客户端定向到某个资源上去。**

### 304 未修改(Not Modified)

**如果客户端发起了一个条件GET请求，而自上次请求后此资源未被修改的话，就可以返回这个状态码来说明资源未被修改。带有这个状态码的响应不应该包含实体的主体部分（即不返回数据）。**

### 305 使用代理（Use Proxy）

客户端可以通过所包含的请求首部，使其请求变成有条件的。

### 306 这个code当前还未使用

### 307 临时重定向（Temporary Redirect）

客户端应该使用 Location 首部给出的URL来临时定位资源。将来的请求应该使用老的URL。

你可能已经注意到 302、303 和 307 状态码之间存在一些交叉。这些状态码的用法有着细微的差别，大部分差别都源于 HTTP/1.0 和 HTTP/1.1 应用程序对这些状态码处理方式的不同。

当 HTTP/1.0 客户端发起一个 POST请求，并在响应中收到 302 重定向状态码时，它会接受 Location 首部的重定向 URL，并向那个 URL发起一个 GET请求（而不会像原始请求中那样发起 POST请求）。

HTTP/1.0 服务器希望 HTTP/1.0 客户端这么做——如果 HTTP/1.0 服务器收到来自 HTTP/1.0 客户端的 POST请求之后发送了 302 状态码，服务器就期望客户端能够接受重定向 URL，并向重定向的 URL发送一个 GET请求。

问题出在 HTTP/1.1。HTTP/1.1 规范使用 303 状态码来实现同样的行为（服务器发送 303 状态码来重定向客户端的 POST请求，在它后面跟上一个 GET请求）。

为了避开这个问题，HTTP/1.1 规范指出，对于 HTTP/1.1 客户端，用 307 状态码取代 302 状态码来进行临时重定向。这样服务器就可以将 302 状态码保留起来，为 HTTP/1.0 客户端使用了。

这样一来，服务器要选择适当的重定向状态码放入重定向响应中发送，就需要查看客户端的 HTTP 版本了。

## 四、400～499——客户端错误状态码

状态码4xx类的目的是为了指明客户端出现错误的情况。这些状态代码表示请求可能出错，妨碍了服务器的处理。 

### 400错误请求（Bad Request）

用于告知客户端它发送了一个错误的请求。请求不能被服务器理解，由于错误的语法。客户端不应该在没有修改请求的情况下再次重复请求。

### 401 未授权的 （Unauthorized）

请求要求身份验证。对于需要登录的网页，服务器可能返回此响应。 

### 402 必需的支付 （Payment Required）

此状态码暂时还未使用，为将来预留。

### 403 禁用 （Forbidden）

**用于说明请求被服务器拒绝了。**如果服务器想说明为什么拒绝请求，可以包含实体的主体部分来对原因进行描述。但这个状态码通常是在服务器不想说明拒绝原因的时候使用的。

### 404 未找到（Not Found）

用于说明服务器无法找到所请求的URL。通常会包含一个实体，以便客户端应用程序显示给用户看。

### 405 方法被禁用（Method Not Allowed）

发起的请求中带有所请求的URL不支持的方法时，使用此状态码。应该在响应中包含 Allow 首
部，以告知客户端对所请求的资源可以使用哪些方法。

### 406 不接受的 （Not Acceptable）

客户端可以指定参数来说明它们愿意接收什么类型的实体。服务器没有与客户端可接受的URL相
匹配的资源时，使用此状态码。通常，服务器会包含一些首部，以便客户端弄清楚为什么请求无法
满足。

### 407 需要代理授权（Proxy Authentication Required） 

此状态代码与 401（未授权）类似，但指定请求者应当授权使用代理。

### 408 请求超时（Request Timeout）

**如果客户端完成请求所花的时间太长，服务器可以回送此状态码，并关闭连接。**

超时时长随服务器的不同有所不同，但通常对所有的合法请求来说，都是够长的。

### 409 冲突 （Confilict）

用于说明请求可能在资源上引发的一些冲突。服务器担心请求会引发冲突时，可以发送此状态
码。响应中应该包含描述冲突的主体。

### 410 已删除（gone）

**如果请求的资源已永久删除，服务器就会返回此响应。**

与404类似，只是服务器曾经拥有过此资源。主要用于Web站点的维护，这样服务器的管理者就
可以在资源被移除的情况下通知客户端了。

### 411 需要有效长度 （Length Required）

服务器不接受不含有效内容长度标头字段的请求。

服务器要求在请求报文中包含 Content-Length 首部时使用。

### 412 未满足前提条件（Precondition Failed）

服务器未满足请求者在请求中设置的其中一个前提条件。

客户端发起了条件请求，且其中一个条件失败了的时候使用。

### 413 请求实体太大（Request Entity Too Large）

服务器无法处理请求，因为请求实体过大，超出服务器的处理能力。

客户端发送的实体主体部分比服务器能够或者希望处理的要大时，使用此状态码。

### 414 请求URI太长（Request-URI Too Long）

请求的 URI（通常为网址）过长，服务器无法处理。

客户端所发请求中的请求URL比服务器能够或者希望处理的要长时，使用此状态码。

### 415 不被支持的媒体类型（Unsupported Media Type）

请求的格式不受请求页面的支持。 

服务器无法理解或无法支持客户端所发实体的内容类型时，使用此状态码。

### 416 请求范围不符合要求 （Requested Range Not Satisfiable）

请求报文所请求的是指定资源的某个范围，而此范围无效或无法满足时，使用此状态码

### 417 未满足期望值

请求的 Expect 请求首部包含了一个期望，但服务器无法满足此期望时，使用此状态码。

如果代理或其他中间应用程序有确切证据说明源端服务器会为某请求产生一个失败的期望，就可以发送这个响应状态码。

## 五、500～599——服务器错误状态码

有时客户端发送了一条有效请求，服务器自身却出错了。这可能是客户端碰上了服务器的缺陷，或者服务器上的子元素，比如某个网关资源，出了错。代理尝试着代表客户端与服务器进行交流时，经常会出现问题。代理会发布 5XX 服务器错误状态码来描述所遇到的问题。

### 500 服务器内部错误 （Internal Server Error）

**服务器遇到一个妨碍它为请求提供服务的错误时，使用此状态码。例如，服务器端程序错误、请求参数错误等。**

### 501 尚未实施 （Not Implemented）

**客户端发起的请求超出服务器的能力范围（比如，使用了服务器不支持的请求方法）时，使用
此状态码。**

### 502 错误网关 （Bad Gateway）

服务器作为网关或代理，从上游服务器收到无效响应。

作为代理或网关使用的服务器从请求响应链的下一条链路上收到了一条伪响应（比如，它无法
连接到其父网关）时，使用此状态码。

### 503 服务暂时不可用（Service Unavailable）

**服务器目前无法使用（由于超载或停机维护）。通常，这只是暂时状态。**

用来说明服务器现在无法为请求提供服务，但将来可以。如果服务器知道什么时候资源会变为
可用的，可以在响应中包含一个 Retry-After 首部。

### 504 网关超时（Gateway Timeout）

**服务器作为网关或代理，但是没有及时从上游服务器收到请求。**

与状态码408类似，只是这里的响应来自一个网关或代理，它们在等待另一服务器对其请求进行
响应时超时了。

### 505  HTTP版本不支持 （HTTP version Not Supported）

服务器收到的请求使用了它无法或不愿支持的协议版本时，使用此状态码。有些服务器应用程
序会选择不支持协议的早期版本。

注：本文内容整理自《HTTP权威指南》一书。
